import { sortCalendarEventsOnNextOccurrence } from './use-calendar-events'

const MOCK_EVENTS: ICalendarEvent[] = [
  {
    id: '0cf76abc-7dec-4f1b-a9ce-19ca792fe83b',
    created_by: '8725b638-3b09-11e7-b651-0242ac110003',
    created_at: 1644249488.16755,
    updated_at: 1644249488.16755,
    deleted_at: null,
    parent_deleted_at: null,
    last_updated_at: '2022-02-07T15:58:08.167Z',
    object_type: 'contact_attribute',
    event_type: 'birthday',
    type_label: 'Birthday',
    timestamp: -5361292800,
    date: '1800-02-09T00:00:00.000Z',
    next_occurence: '2023-02-09T00:00:00.000Z',
    end_date: null,
    recurring: true,
    title: "Mary Marquez's Birthday",
    all_day: true,
    deal: null,
    contact: '0471364e-a91a-487b-a2fc-1c7fa501a1c5',
    campaign: null,
    credential_id: null,
    thread_key: null,
    showing: null,
    flow: null,
    users: ['c6fdad80-8569-11ea-9017-027d31a1f7a0'],
    accessible_to: null,
    people: [
      {
        id: '2a378d05-b241-4d21-a027-f6cc6e58e2e0',
        display_name: 'John Henry',
        partner_name: null,
        sort_field: 'Henry John',
        last_touch: 1644467401.16319,
        last_touch_action: 'email',
        next_touch: null,
        touch_freq: null,
        ios_address_book_id: null,
        android_address_book_id: null,
        created_at: 1643818434.75358,
        updated_at: 1644322159.54549,
        deleted_at: null,
        created_for: 'direct_request',
        updated_for: 'direct_request',
        deleted_for: null,
        title: null,
        first_name: 'John',
        partner_first_name: null,
        middle_name: null,
        last_name: 'Henry',
        partner_last_name: null,
        marketing_name: null,
        nickname: null,
        email: 'jhenry@outlook.com',
        primary_email: 'jhenry@outlook.com',
        emails: ['jhenry@outlook.com'],
        parked: false,
        partner_email: null,
        phone_number: '310-518-4481',
        primary_phone_number: '310-518-4481',
        phone_numbers: ['310-518-4481'],
        company: null,
        birthday: null,
        profile_image_url: null,
        cover_image_url: null,
        job_title: null,
        source_type: 'ExplicitlyCreated',
        source: null,
        website: null,
        tags: null,
        address: null,
        type: 'contact'
      }
    ],
    people_len: 1,
    timestamp_readable: '1800-02-09T00:00:00.000Z',
    timestamp_midday: '1800-02-09T12:00:00.000Z',
    type: 'calendar_event'
  },
  {
    id: '747dd80f-2553-43ea-838c-c94681dbffdf',
    created_by: 'c6fdad80-8569-11ea-9017-027d31a1f7a0',
    created_at: 1644930632.08749,
    updated_at: 1644930632.08749,
    deleted_at: null,
    parent_deleted_at: null,
    last_updated_at: '2022-02-15T13:10:32.087Z',
    object_type: 'contact_attribute',
    event_type: 'birthday',
    type_label: 'Birthday',
    timestamp: 63072000,
    date: '1972-01-01T00:00:00.000Z',
    next_occurence: '2023-01-01T00:00:00.000Z',
    end_date: null,
    recurring: true,
    title: "Larry Persia's Birthday",
    all_day: true,
    deal: null,
    contact: 'ccac271c-e195-4238-83fa-b0832da31ac6',
    campaign: null,
    credential_id: null,
    thread_key: null,
    showing: null,
    flow: null,
    users: ['c6fdad80-8569-11ea-9017-027d31a1f7a0'],
    accessible_to: null,
    people: [
      {
        id: '2a378d05-b241-4d21-a027-f6cc6e58e2e0',
        display_name: 'John Henry',
        partner_name: null,
        sort_field: 'Henry John',
        last_touch: 1644467401.16319,
        last_touch_action: 'email',
        next_touch: null,
        touch_freq: null,
        ios_address_book_id: null,
        android_address_book_id: null,
        created_at: 1643818434.75358,
        updated_at: 1644322159.54549,
        deleted_at: null,
        created_for: 'direct_request',
        updated_for: 'direct_request',
        deleted_for: null,
        title: null,
        first_name: 'John',
        partner_first_name: null,
        middle_name: null,
        last_name: 'Henry',
        partner_last_name: null,
        marketing_name: null,
        nickname: null,
        email: 'jhenry@outlook.com',
        primary_email: 'jhenry@outlook.com',
        emails: ['jhenry@outlook.com'],
        parked: false,
        partner_email: null,
        phone_number: '310-518-4481',
        primary_phone_number: '310-518-4481',
        phone_numbers: ['310-518-4481'],
        company: null,
        birthday: null,
        profile_image_url: null,
        cover_image_url: null,
        job_title: null,
        source_type: 'ExplicitlyCreated',
        source: null,
        website: null,
        tags: null,
        address: null,
        type: 'contact'
      }
    ],
    people_len: 1,
    timestamp_readable: '1972-01-01T00:00:00.000Z',
    timestamp_midday: '1972-01-01T12:00:00.000Z',
    type: 'calendar_event'
  },
  {
    id: '251d2956-7644-4abf-a979-f2c6130db8dd',
    created_by: 'c6fdad80-8569-11ea-9017-027d31a1f7a0',
    created_at: 1644930632.05796,
    updated_at: 1644930632.05796,
    deleted_at: null,
    parent_deleted_at: null,
    last_updated_at: '2022-02-15T13:10:32.057Z',
    object_type: 'contact_attribute',
    event_type: 'birthday',
    type_label: 'Birthday',
    timestamp: 700185600,
    date: '1992-03-10T00:00:00.000Z',
    next_occurence: '2022-03-10T00:00:00.000Z',
    end_date: null,
    recurring: true,
    title: "Henry Fernandez's Birthday",
    all_day: true,
    deal: null,
    contact: '48a3e4c0-5fea-45d0-8c0d-8193e8981a0c',
    campaign: null,
    credential_id: null,
    thread_key: null,
    showing: null,
    flow: null,
    users: ['c6fdad80-8569-11ea-9017-027d31a1f7a0'],
    accessible_to: null,
    people: [
      {
        id: '2a378d05-b241-4d21-a027-f6cc6e58e2e0',
        display_name: 'John Henry',
        partner_name: null,
        sort_field: 'Henry John',
        last_touch: 1644467401.16319,
        last_touch_action: 'email',
        next_touch: null,
        touch_freq: null,
        ios_address_book_id: null,
        android_address_book_id: null,
        created_at: 1643818434.75358,
        updated_at: 1644322159.54549,
        deleted_at: null,
        created_for: 'direct_request',
        updated_for: 'direct_request',
        deleted_for: null,
        title: null,
        first_name: 'John',
        partner_first_name: null,
        middle_name: null,
        last_name: 'Henry',
        partner_last_name: null,
        marketing_name: null,
        nickname: null,
        email: 'jhenry@outlook.com',
        primary_email: 'jhenry@outlook.com',
        emails: ['jhenry@outlook.com'],
        parked: false,
        partner_email: null,
        phone_number: '310-518-4481',
        primary_phone_number: '310-518-4481',
        phone_numbers: ['310-518-4481'],
        company: null,
        birthday: null,
        profile_image_url: null,
        cover_image_url: null,
        job_title: null,
        source_type: 'ExplicitlyCreated',
        source: null,
        website: null,
        tags: null,
        address: null,
        type: 'contact'
      }
    ],
    people_len: 1,
    timestamp_readable: '1992-03-10T00:00:00.000Z',
    timestamp_midday: '1992-03-10T12:00:00.000Z',
    type: 'calendar_event'
  },
  {
    id: '4d689d88-9610-4f0f-8abd-1523e53a7c33',
    created_by: '8725b638-3b09-11e7-b651-0242ac110003',
    created_at: 1644249366.80259,
    updated_at: 1644249366.80259,
    deleted_at: null,
    parent_deleted_at: null,
    last_updated_at: '2022-02-07T15:56:06.802Z',
    object_type: 'contact_attribute',
    event_type: 'home_anniversary',
    type_label: 'Home Anniversary',
    timestamp: 1644278400,
    date: '2022-02-08T00:00:00.000Z',
    next_occurence: '2023-02-08T00:00:00.000Z',
    end_date: null,
    recurring: true,
    title: "nonatjamesanthony@gmail.com's Home Anniversary",
    all_day: true,
    deal: null,
    contact: 'e17e050d-26dd-4518-9712-b870b924bfef',
    campaign: null,
    credential_id: null,
    thread_key: null,
    showing: null,
    flow: null,
    users: ['c6fdad80-8569-11ea-9017-027d31a1f7a0'],
    accessible_to: null,
    people: [
      {
        id: '2a378d05-b241-4d21-a027-f6cc6e58e2e0',
        display_name: 'John Henry',
        partner_name: null,
        sort_field: 'Henry John',
        last_touch: 1644467401.16319,
        last_touch_action: 'email',
        next_touch: null,
        touch_freq: null,
        ios_address_book_id: null,
        android_address_book_id: null,
        created_at: 1643818434.75358,
        updated_at: 1644322159.54549,
        deleted_at: null,
        created_for: 'direct_request',
        updated_for: 'direct_request',
        deleted_for: null,
        title: null,
        first_name: 'John',
        partner_first_name: null,
        middle_name: null,
        last_name: 'Henry',
        partner_last_name: null,
        marketing_name: null,
        nickname: null,
        email: 'jhenry@outlook.com',
        primary_email: 'jhenry@outlook.com',
        emails: ['jhenry@outlook.com'],
        parked: false,
        partner_email: null,
        phone_number: '310-518-4481',
        primary_phone_number: '310-518-4481',
        phone_numbers: ['310-518-4481'],
        company: null,
        birthday: null,
        profile_image_url: null,
        cover_image_url: null,
        job_title: null,
        source_type: 'ExplicitlyCreated',
        source: null,
        website: null,
        tags: null,
        address: null,
        type: 'contact'
      }
    ],
    people_len: 1,
    timestamp_readable: '2022-02-08T00:00:00.000Z',
    timestamp_midday: '2022-02-08T12:00:00.000Z',
    type: 'calendar_event'
  },
  {
    id: '2c9e95dd-0de4-4058-934e-c04ae9594d0b',
    created_by: '8725b638-3b09-11e7-b651-0242ac110003',
    created_at: 1644249380.32764,
    updated_at: 1644249380.32764,
    deleted_at: null,
    parent_deleted_at: null,
    last_updated_at: '2022-02-07T15:56:20.327Z',
    object_type: 'contact_attribute',
    event_type: 'wedding_anniversary',
    type_label: 'Wedding Anniversary',
    timestamp: 1644278400,
    date: '2022-02-08T00:00:00.000Z',
    next_occurence: '2023-02-08T00:00:00.000Z',
    end_date: null,
    recurring: true,
    title: "nonatjamesanthony@gmail.com's Wedding Anniversary",
    all_day: true,
    deal: null,
    contact: 'e17e050d-26dd-4518-9712-b870b924bfef',
    campaign: null,
    credential_id: null,
    thread_key: null,
    showing: null,
    flow: null,
    users: ['c6fdad80-8569-11ea-9017-027d31a1f7a0'],
    accessible_to: null,
    people: [
      {
        id: '2a378d05-b241-4d21-a027-f6cc6e58e2e0',
        display_name: 'John Henry',
        partner_name: null,
        sort_field: 'Henry John',
        last_touch: 1644467401.16319,
        last_touch_action: 'email',
        next_touch: null,
        touch_freq: null,
        ios_address_book_id: null,
        android_address_book_id: null,
        created_at: 1643818434.75358,
        updated_at: 1644322159.54549,
        deleted_at: null,
        created_for: 'direct_request',
        updated_for: 'direct_request',
        deleted_for: null,
        title: null,
        first_name: 'John',
        partner_first_name: null,
        middle_name: null,
        last_name: 'Henry',
        partner_last_name: null,
        marketing_name: null,
        nickname: null,
        email: 'jhenry@outlook.com',
        primary_email: 'jhenry@outlook.com',
        emails: ['jhenry@outlook.com'],
        parked: false,
        partner_email: null,
        phone_number: '310-518-4481',
        primary_phone_number: '310-518-4481',
        phone_numbers: ['310-518-4481'],
        company: null,
        birthday: null,
        profile_image_url: null,
        cover_image_url: null,
        job_title: null,
        source_type: 'ExplicitlyCreated',
        source: null,
        website: null,
        tags: null,
        address: null,
        type: 'contact'
      }
    ],
    people_len: 1,
    timestamp_readable: '2022-02-08T00:00:00.000Z',
    timestamp_midday: '2022-02-08T12:00:00.000Z',
    type: 'calendar_event'
  },
  {
    id: '30b7979e-f5bd-404c-997f-81b7e1cdab24',
    created_by: '8725b638-3b09-11e7-b651-0242ac110003',
    created_at: 1643829970.64731,
    updated_at: 1644322159.35162,
    deleted_at: null,
    parent_deleted_at: null,
    last_updated_at: '2022-02-08T12:09:19.351Z',
    object_type: 'contact_attribute',
    event_type: 'wedding_anniversary',
    type_label: 'Wedding Anniversary',
    timestamp: 1644451200,
    date: '2022-02-10T00:00:00.000Z',
    next_occurence: '2023-02-10T00:00:00.000Z',
    end_date: null,
    recurring: true,
    title: "John Henry's Wedding Anniversary",
    all_day: true,
    deal: null,
    contact: '2a378d05-b241-4d21-a027-f6cc6e58e2e0',
    campaign: null,
    credential_id: null,
    thread_key: null,
    showing: null,
    flow: null,
    users: ['c6fdad80-8569-11ea-9017-027d31a1f7a0'],
    accessible_to: null,
    people: [
      {
        id: '2a378d05-b241-4d21-a027-f6cc6e58e2e0',
        display_name: 'John Henry',
        partner_name: null,
        sort_field: 'Henry John',
        last_touch: 1644467401.16319,
        last_touch_action: 'email',
        next_touch: null,
        touch_freq: null,
        ios_address_book_id: null,
        android_address_book_id: null,
        created_at: 1643818434.75358,
        updated_at: 1644322159.54549,
        deleted_at: null,
        created_for: 'direct_request',
        updated_for: 'direct_request',
        deleted_for: null,
        title: null,
        first_name: 'John',
        partner_first_name: null,
        middle_name: null,
        last_name: 'Henry',
        partner_last_name: null,
        marketing_name: null,
        nickname: null,
        email: 'jhenry@outlook.com',
        primary_email: 'jhenry@outlook.com',
        emails: ['jhenry@outlook.com'],
        parked: false,
        partner_email: null,
        phone_number: '310-518-4481',
        primary_phone_number: '310-518-4481',
        phone_numbers: ['310-518-4481'],
        company: null,
        birthday: null,
        profile_image_url: null,
        cover_image_url: null,
        job_title: null,
        source_type: 'ExplicitlyCreated',
        source: null,
        website: null,
        tags: null,
        address: null,
        type: 'contact'
      }
    ],
    people_len: 1,
    timestamp_readable: '2022-02-10T00:00:00.000Z',
    timestamp_midday: '2022-02-10T12:00:00.000Z',
    type: 'calendar_event'
  }
] as unknown as ICalendarEvent[]

const EXPECTED_ORDER_OF_EVENTS = [
  '251d2956-7644-4abf-a979-f2c6130db8dd',
  '747dd80f-2553-43ea-838c-c94681dbffdf',
  '4d689d88-9610-4f0f-8abd-1523e53a7c33',
  '2c9e95dd-0de4-4058-934e-c04ae9594d0b',
  '0cf76abc-7dec-4f1b-a9ce-19ca792fe83b',
  '30b7979e-f5bd-404c-997f-81b7e1cdab24'
]

describe('hooks/use-calendar-events', () => {
  it('sortCalendarEventsOnNextOccurrence should return properly sorted events', async () => {
    const sortedEvents = sortCalendarEventsOnNextOccurrence(MOCK_EVENTS)

    expect(sortedEvents.map(event => event.id)).toEqual(
      EXPECTED_ORDER_OF_EVENTS
    )
  })
})
